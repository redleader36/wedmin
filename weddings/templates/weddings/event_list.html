{% extends "base.html" %}

{% block content %}
	<h2>Events</h2>
	<div class="panel panel-default">
    <div class="panel-body">
	{% if object_list %}
		<ul class="nav nav-tabs">
			{% for event in object_list %}
			{% if event.public or user.is_authenticated %}
				<li class="{% if forloop.first %}active{% endif %}"><a href="#{{ event.id }}" data-toggle="tab" aria-expanded="true">{{ event.name }}</a></li>
			{% endif %}
			{% endfor %}
			<li class=""><a href="#lodging" data-toggle="tab" aria-expanded="false">Lodging</a></li>
			<li class=""><a href="#registry" data-toggle="tab" aria-expanded="false">Registry</a></li>
		</ul>
		<div id="myTabContent" class="tab-content">
			{% for event in object_list %}
			{% if event.public or user.is_authenticated %}
		    	<div class="tab-pane fade {% if forloop.first %}active in{% endif %}" id="{{ event.id }}">
		    		<div class="panel panel-default">
				    <div class="row">
					<div class="col-sm-6">
			        Date: {{ event.date }} <br>
			        Description:  {{ event.description|linebreaks }} <br>
			        Schedule:  {{ event.schedule|linebreaks }} <br>
			        </div>
			        <div class="col-sm-6">
			        Venue: {{ event.venue }} <br>
			        Address: {{ event.address }} <br>
			        {% if event.latitude and event.latitude %}        
			        	<div id="map" style="width:400px;height:400px;"></div>
			        	{% load gmapify %}
			        	{% gmapify "map" event.latitude event.longitude zoom=16 marker_title=event.venue %}
			        {% endif %}
			        </div>
			        </div><br>
			        {% if user.is_authenticated %}
			        <p class="text-center">
			        <a href="{% url 'weddings:guest-list' event.id %}" class="btn btn-primary "><span class="glyphicon glyphicon-list" aria-hidden="true"></span> Guest List</a>
			        </p>
			        {% endif %}
			    </div>
				{% if user.is_authenticated %}
			    <div class="btn-group">
					<a href="{% url 'weddings:event-edit' event.id %}" class="btn btn-default"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit Event</a>
					<a href="{% url 'weddings:event-delete' event.id %}" class="btn btn-danger"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Delete Event</a>
				</div>
			    {% endif %}
		    	</div>
	    	{% endif %}
		    {% endfor %}
		    <div class="tab-pane fade" id="lodging">
		    	<p>lodging panel</p>
		    </div>
		    <div class="tab-pane fade" id="registry">
		    	<p>registry panel</p>
		    </div>
	{% else %}
	    <p>No Events are available.</p>
	{% endif %}
	{% if user.is_authenticated %}
    
	<a href="{% url 'weddings:event-new' %}" class="btn btn-default"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Create Event</a>
	{% endif %}
	</div>
	</div>

{% endblock %}